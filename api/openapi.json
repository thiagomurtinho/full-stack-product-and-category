{
  "openapi": "3.0.3",
  "info": {
    "title": "Full Stack Product and Category API",
    "description": "API RESTful para gerenciamento de produtos e categorias com arquitetura Functional Core / Imperative Shell.\n\n## Funcionalidades\n\n### Categories\n- CRUD completo de categorias\n- Hierarquia de categorias (árvore)\n- Path resolution (`/electronics/computers/laptops`)\n- Busca e filtros\n- Paginação\n\n### Products\n- CRUD completo de produtos\n- Múltiplas categorias por produto\n- Busca fuzzy match\n- Filtros por categoria, preço\n- Ordenação\n- Paginação\n- Path resolution (`/electronics/computers/laptops/macbook-pro-16-inch`)\n\n## Arquitetura\n- **Functional Core**: Lógica de negócio pura e testável\n- **Imperative Shell**: Interface HTTP e infraestrutura\n- **TypeScript**: Type safety em todas as camadas\n- **Zod**: Validação robusta de entrada e saída\n- **Prisma**: ORM moderno com SQLite",
    "version": "1.0.0",
    "contact": {
      "name": "API Support",
      "email": "support@example.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:5000",
      "description": "Development server"
    },
    {
      "url": "https://api.example.com",
      "description": "Production server"
    }
  ],
  "paths": {
    "/api/health": {
      "get": {
        "tags": ["Health"],
        "summary": "Health check",
        "description": "Verifica o status do servidor",
        "responses": {
          "200": {
            "description": "Servidor funcionando normalmente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-15T10:30:00.000Z"
                    },
                    "architecture": {
                      "type": "string",
                      "example": "Functional Core / Imperative Shell"
                    },
                    "version": {
                      "type": "string",
                      "example": "1.0.0"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/categories": {
      "get": {
        "tags": ["Categories"],
        "summary": "Listar categorias",
        "description": "Retorna uma lista paginada de categorias",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "Número máximo de categorias por página",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Número de categorias para pular",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Termo de busca para filtrar categorias",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "parentId",
            "in": "query",
            "description": "ID da categoria pai para filtrar filhos",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de categorias",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Category"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "post": {
        "tags": ["Categories"],
        "summary": "Criar categoria",
        "description": "Cria uma nova categoria",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCategory"
              },
              "examples": {
                "root_category": {
                  "summary": "Categoria raiz",
                  "value": {
                    "name": "Electronics",
                    "slug": "electronics"
                  }
                },
                "child_category": {
                  "summary": "Categoria filha",
                  "value": {
                    "name": "Gaming Laptops",
                    "slug": "gaming-laptops",
                    "parentId": "550e8400-e29b-41d4-a716-446655440000"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Categoria criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "409": {
            "description": "Slug já existe",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/categories/count": {
      "get": {
        "tags": ["Categories"],
        "summary": "Contar categorias",
        "description": "Retorna o número total de categorias",
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "description": "Termo de busca para filtrar contagem",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "parentId",
            "in": "query",
            "description": "ID da categoria pai para contar filhos",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Contagem de categorias",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "integer",
                      "example": 25
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/categories/{id}": {
      "get": {
        "tags": ["Categories"],
        "summary": "Buscar categoria por ID",
        "description": "Retorna uma categoria específica pelo ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID da categoria",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Categoria encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "put": {
        "tags": ["Categories"],
        "summary": "Atualizar categoria",
        "description": "Atualiza uma categoria existente",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID da categoria",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCategory"
              },
              "example": {
                "name": "Updated Electronics",
                "slug": "updated-electronics"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Categoria atualizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "409": {
            "description": "Slug já existe",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "delete": {
        "tags": ["Categories"],
        "summary": "Deletar categoria",
        "description": "Remove uma categoria",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID da categoria",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Categoria deletada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/categories/slug/{slug}": {
      "get": {
        "tags": ["Categories"],
        "summary": "Buscar categoria por slug",
        "description": "Retorna uma categoria específica pelo slug",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "description": "Slug da categoria",
            "schema": {
              "type": "string",
              "pattern": "^[a-z0-9-]+$"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Categoria encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/categories/path/{slug}": {
      "get": {
        "tags": ["Categories"],
        "summary": "Buscar categoria com path completo",
        "description": "Retorna uma categoria com o caminho completo da hierarquia",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "description": "Slug da categoria",
            "schema": {
              "type": "string",
              "pattern": "^[a-z0-9-]+$"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Categoria com path encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryWithPath"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/categories/children/{parentId}": {
      "get": {
        "tags": ["Categories"],
        "summary": "Buscar filhos de uma categoria",
        "description": "Retorna todas as categorias filhas de uma categoria específica",
        "parameters": [
          {
            "name": "parentId",
            "in": "path",
            "required": true,
            "description": "ID da categoria pai",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de categorias filhas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Category"
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/products": {
      "get": {
        "tags": ["Products"],
        "summary": "Listar produtos",
        "description": "Retorna uma lista paginada de produtos",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "Número máximo de produtos por página",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Número de produtos para pular",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Termo de busca para filtrar produtos",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "categoryIds",
            "in": "query",
            "description": "IDs das categorias para filtrar (separados por vírgula)",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "minPrice",
            "in": "query",
            "description": "Preço mínimo",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "maxPrice",
            "in": "query",
            "description": "Preço máximo",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "orderBy",
            "in": "query",
            "description": "Campo para ordenação",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["name", "price", "createdAt"],
              "default": "createdAt"
            }
          },
          {
            "name": "orderDirection",
            "in": "query",
            "description": "Direção da ordenação",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["asc", "desc"],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de produtos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ProductWithCategories"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "post": {
        "tags": ["Products"],
        "summary": "Criar produto",
        "description": "Cria um novo produto",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProduct"
              },
              "examples": {
                "gaming_laptop": {
                  "summary": "Laptop para gaming",
                  "value": {
                    "name": "ASUS ROG Strix G15",
                    "slug": "asus-rog-strix-g15",
                    "description": "Gaming laptop with RTX 4070 and Ryzen 9",
                    "price": 1499.99,
                    "imageUrl": "https://example.com/images/asus-rog-g15.jpg",
                    "categoryIds": ["550e8400-e29b-41d4-a716-446655440000", "660e8400-e29b-41d4-a716-446655440000"]
                  }
                },
                "smartphone": {
                  "summary": "Smartphone",
                  "value": {
                    "name": "iPhone 15 Pro",
                    "slug": "iphone-15-pro",
                    "description": "Latest iPhone with A17 Pro chip",
                    "price": 999.99,
                    "imageUrl": "https://example.com/images/iphone-15-pro.jpg",
                    "categoryIds": ["770e8400-e29b-41d4-a716-446655440000"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Produto criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductWithCategories"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "409": {
            "description": "Slug já existe",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/products/count": {
      "get": {
        "tags": ["Products"],
        "summary": "Contar produtos",
        "description": "Retorna o número total de produtos",
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "description": "Termo de busca para filtrar contagem",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "categoryIds",
            "in": "query",
            "description": "IDs das categorias para filtrar (separados por vírgula)",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "minPrice",
            "in": "query",
            "description": "Preço mínimo",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "maxPrice",
            "in": "query",
            "description": "Preço máximo",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Contagem de produtos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "integer",
                      "example": 50
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/products/search": {
      "get": {
        "tags": ["Products"],
        "summary": "Busca fuzzy de produtos",
        "description": "Realiza busca fuzzy match em produtos",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "description": "Termo de busca",
            "schema": {
              "type": "string",
              "minLength": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Número máximo de resultados",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resultados da busca",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductWithCategories"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/products/{id}": {
      "get": {
        "tags": ["Products"],
        "summary": "Buscar produto por ID",
        "description": "Retorna um produto específico pelo ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID do produto",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Produto encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductWithCategories"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "put": {
        "tags": ["Products"],
        "summary": "Atualizar produto",
        "description": "Atualiza um produto existente",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID do produto",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProduct"
              },
              "example": {
                "name": "Updated ASUS ROG Strix G15",
                "description": "Updated gaming laptop description",
                "price": 1599.99,
                "categoryIds": ["550e8400-e29b-41d4-a716-446655440000"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Produto atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductWithCategories"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "409": {
            "description": "Slug já existe",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "delete": {
        "tags": ["Products"],
        "summary": "Deletar produto",
        "description": "Remove um produto",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID do produto",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Produto deletado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductWithCategories"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/products/slug/{slug}": {
      "get": {
        "tags": ["Products"],
        "summary": "Buscar produto por slug",
        "description": "Retorna um produto específico pelo slug",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "description": "Slug do produto",
            "schema": {
              "type": "string",
              "pattern": "^[a-z0-9-]+$"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Produto encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductWithCategories"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/products/by-category/{path}": {
      "get": {
        "tags": ["Products"],
        "summary": "Buscar produtos por categoria",
        "description": "Retorna produtos de uma categoria específica usando path",
        "parameters": [
          {
            "name": "path",
            "in": "path",
            "required": true,
            "description": "Path da categoria (ex: electronics/computers/laptops)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Número máximo de produtos por página",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Número de produtos para pular",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "minPrice",
            "in": "query",
            "description": "Preço mínimo",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "maxPrice",
            "in": "query",
            "description": "Preço máximo",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "orderBy",
            "in": "query",
            "description": "Campo para ordenação",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["name", "price", "createdAt"],
              "default": "createdAt"
            }
          },
          {
            "name": "orderDirection",
            "in": "query",
            "description": "Direção da ordenação",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["asc", "desc"],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de produtos da categoria",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ProductWithCategories"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "BaseEntity": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": ["id", "createdAt", "updatedAt"]
      },
      "CategoryPath": {
        "type": "object",
        "properties": {
          "ids": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "example": ["550e8400-e29b-41d4-a716-446655440000", "660e8400-e29b-41d4-a716-446655440000"]
          },
          "names": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": ["Electronics", "Computers"]
          },
          "slugs": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": ["electronics", "computers"]
          },
          "fullPath": {
            "type": "string",
            "example": "electronics/computers"
          }
        },
        "required": ["ids", "names", "slugs", "fullPath"]
      },
      "Category": {
        "allOf": [
          {
            "$ref": "#/components/schemas/BaseEntity"
          },
          {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "minLength": 1,
                "maxLength": 100,
                "example": "Gaming Laptops"
              },
              "slug": {
                "type": "string",
                "pattern": "^[a-z0-9-]+$",
                "minLength": 1,
                "maxLength": 200,
                "example": "gaming-laptops"
              },
              "parentId": {
                "type": "string",
                "format": "uuid",
                "nullable": true,
                "example": "550e8400-e29b-41d4-a716-446655440000"
              }
            },
            "required": ["name", "slug"]
          }
        ]
      },
      "CreateCategory": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Gaming Laptops"
          },
          "slug": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$",
            "minLength": 1,
            "maxLength": 200,
            "example": "gaming-laptops"
          },
          "parentId": {
            "type": "string",
            "format": "uuid",
            "nullable": true,
            "example": "550e8400-e29b-41d4-a716-446655440000"
          }
        },
        "required": ["name", "slug"]
      },
      "UpdateCategory": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "example": "Updated Gaming Laptops"
          },
          "slug": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$",
            "minLength": 1,
            "maxLength": 200,
            "example": "updated-gaming-laptops"
          },
          "parentId": {
            "type": "string",
            "format": "uuid",
            "nullable": true,
            "example": "550e8400-e29b-41d4-a716-446655440000"
          }
        }
      },
      "CategoryWithPath": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Category"
          },
          {
            "type": "object",
            "properties": {
              "path": {
                "$ref": "#/components/schemas/CategoryPath"
              },
              "children": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Category"
                }
              }
            }
          }
        ]
      },
      "ProductCategory": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "example": "Gaming Laptops"
          },
          "slug": {
            "type": "string",
            "example": "gaming-laptops"
          },
          "path": {
            "$ref": "#/components/schemas/CategoryPath"
          }
        }
      },
      "Product": {
        "allOf": [
          {
            "$ref": "#/components/schemas/BaseEntity"
          },
          {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "minLength": 1,
                "maxLength": 200,
                "example": "ASUS ROG Strix G15"
              },
              "slug": {
                "type": "string",
                "pattern": "^[a-z0-9-]+$",
                "minLength": 1,
                "maxLength": 200,
                "example": "asus-rog-strix-g15"
              },
              "description": {
                "type": "string",
                "maxLength": 1000,
                "example": "Gaming laptop with RTX 4070 and Ryzen 9 processor"
              },
              "price": {
                "type": "number",
                "minimum": 0,
                "example": 1499.99
              },
              "imageUrl": {
                "type": "string",
                "format": "uri",
                "nullable": true,
                "example": "https://example.com/images/asus-rog-g15.jpg"
              },
              "categoryIds": {
                "type": "array",
                "items": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": ["550e8400-e29b-41d4-a716-446655440000", "660e8400-e29b-41d4-a716-446655440000"]
              }
            },
            "required": ["name", "slug", "price", "categoryIds"]
          }
        ]
      },
      "CreateProduct": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "example": "ASUS ROG Strix G15"
          },
          "slug": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$",
            "minLength": 1,
            "maxLength": 200,
            "example": "asus-rog-strix-g15"
          },
          "description": {
            "type": "string",
            "maxLength": 1000,
            "example": "Gaming laptop with RTX 4070 and Ryzen 9 processor"
          },
          "price": {
            "type": "number",
            "minimum": 0,
            "example": 1499.99
          },
          "imageUrl": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "example": "https://example.com/images/asus-rog-g15.jpg"
          },
          "categoryIds": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "example": ["550e8400-e29b-41d4-a716-446655440000", "660e8400-e29b-41d4-a716-446655440000"]
          }
        },
        "required": ["name", "slug", "price", "categoryIds"]
      },
      "UpdateProduct": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "example": "Updated ASUS ROG Strix G15"
          },
          "slug": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$",
            "minLength": 1,
            "maxLength": 200,
            "example": "updated-asus-rog-strix-g15"
          },
          "description": {
            "type": "string",
            "maxLength": 1000,
            "example": "Updated gaming laptop description"
          },
          "price": {
            "type": "number",
            "minimum": 0,
            "example": 1599.99
          },
          "imageUrl": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "example": "https://example.com/images/updated-asus-rog-g15.jpg"
          },
          "categoryIds": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "example": ["550e8400-e29b-41d4-a716-446655440000"]
          }
        }
      },
      "ProductWithCategories": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Product"
          },
          {
            "type": "object",
            "properties": {
              "categories": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ProductCategory"
                }
              },
              "categoryPaths": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "example": ["electronics/computers/laptops", "electronics/gaming"]
              }
            }
          }
        ]
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "example": 100
          },
          "limit": {
            "type": "integer",
            "example": 20
          },
          "offset": {
            "type": "integer",
            "example": 0
          },
          "totalPages": {
            "type": "integer",
            "example": 5
          },
          "currentPage": {
            "type": "integer",
            "example": 1
          },
          "hasNext": {
            "type": "boolean",
            "example": true
          },
          "hasPrev": {
            "type": "boolean",
            "example": false
          }
        },
        "required": ["total", "limit", "offset", "totalPages", "currentPage", "hasNext", "hasPrev"]
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "example": "Validation error"
          },
          "message": {
            "type": "string",
            "example": "Invalid input data"
          },
          "details": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "field": {
                  "type": "string",
                  "example": "name"
                },
                "message": {
                  "type": "string",
                  "example": "Name is required"
                }
              }
            }
          }
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Dados de entrada inválidos",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Validation error",
              "message": "Invalid input data",
              "details": [
                {
                  "field": "name",
                  "message": "Name is required"
                },
                {
                  "field": "slug",
                  "message": "Slug must match pattern ^[a-z0-9-]+$"
                }
              ]
            }
          }
        }
      },
      "NotFound": {
        "description": "Recurso não encontrado",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Not found",
              "message": "Resource not found"
            }
          }
        }
      },
      "InternalServerError": {
        "description": "Erro interno do servidor",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Internal server error",
              "message": "An unexpected error occurred"
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Health",
      "description": "Endpoints de verificação de saúde da API"
    },
    {
      "name": "Categories",
      "description": "Gerenciamento de categorias com hierarquia"
    },
    {
      "name": "Products",
      "description": "Gerenciamento de produtos com múltiplas categorias"
    }
  ]
} 